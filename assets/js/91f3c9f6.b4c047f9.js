(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[3969],{3905:function(e,t,n){"use strict";n.d(t,{Zo:function(){return u},kt:function(){return p}});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},s=Object.keys(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=a.createContext({}),c=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},u=function(e){var t=c(e.components);return a.createElement(l.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,s=e.originalType,l=e.parentName,u=i(e,["components","mdxType","originalType","parentName"]),d=c(n),p=r,w=d["".concat(l,".").concat(p)]||d[p]||m[p]||s;return n?a.createElement(w,o(o({ref:t},u),{},{components:n})):a.createElement(w,o({ref:t},u))}));function p(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var s=n.length,o=new Array(s);o[0]=d;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i.mdxType="string"==typeof e?e:r,o[1]=i;for(var c=2;c<s;c++)o[c]=n[c];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},3149:function(e,t,n){"use strict";n.r(t),n.d(t,{frontMatter:function(){return i},contentTitle:function(){return l},metadata:function(){return c},toc:function(){return u},default:function(){return d}});var a=n(2122),r=n(9756),s=(n(7294),n(3905)),o=["components"],i={sidebar_position:2},l="Basics of Smart Contract Interactions",c={unversionedId:"lesson-2/interact",id:"lesson-2/interact",isDocsHomePage:!1,title:"Basics of Smart Contract Interactions",description:"As mentioned before smart contracts are executable codes.",source:"@site/dev-academy/lesson-2/02-interact.md",sourceDirName:"lesson-2",slug:"/lesson-2/interact",permalink:"/dev-academy/lesson-2/interact",editUrl:"https://github.com/CosmWasm/docs/edit/main/dev-academy/lesson-2/02-interact.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"devAcademy",previous:{title:"What are Smart Contracts?",permalink:"/dev-academy/lesson-2/what-is-smart-contracts"},next:{title:"Challenge",permalink:"/dev-academy/lesson-2/challenge"}},u=[{value:"Where to find smart contracts?",id:"where-to-find-smart-contracts",children:[]},{value:"Download",id:"download",children:[]},{value:"Store",id:"store",children:[]},{value:"Instantiate",id:"instantiate",children:[]}],m={toc:u};function d(e){var t=e.components,n=(0,r.Z)(e,o);return(0,s.kt)("wrapper",(0,a.Z)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,s.kt)("h1",{id:"basics-of-smart-contract-interactions"},"Basics of Smart Contract Interactions"),(0,s.kt)("p",null,"As mentioned before smart contracts are executable codes.\nIn the next lessons, we will learn how to write one. Until then best to use already written to keep things simple."),(0,s.kt)("h2",{id:"where-to-find-smart-contracts"},"Where to find smart contracts?"),(0,s.kt)("p",null,"Normally, we compile smart contracts using rust compilers then code optimizers.\nNow we will just download a precompiled one by cosmwasm team."),(0,s.kt)("h2",{id:"download"},"Download"),(0,s.kt)("p",null,"We provide smart contract binary executable\nat ",(0,s.kt)("a",{parentName:"p",href:"https://github.com/CosmWasm/cw-plus/"},"cw-plus")," repo alongside the code.\ncw-plus repository is a collection of production grade smart contracts that has been heavily testes on real mainnets.\nYou will see a list of available contracts on the repository page.\nGo click ",(0,s.kt)("strong",{parentName:"p"},"Releases")," button to see tagged binary executables. You can download binaries and deploy to\ncompatible blockchains."),(0,s.kt)("p",null,"We will use cw20 prebuilt binary for this course: ",(0,s.kt)("a",{parentName:"p",href:"https://github.com/CosmWasm/cw-plus/releases/download/v0.8.0/cw20_base.wasm"},"cw20-base")),(0,s.kt)("p",null,"Please don't pay attention to cw20-base details, just focus on getting a contract on a testnet."),(0,s.kt)("h2",{id:"store"},"Store"),(0,s.kt)("p",null,"We will deploy the code using ",(0,s.kt)("inlineCode",{parentName:"p"},"wasmd")," CLI we installed earlier."),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-sh"},"curl -LJO https://github.com/CosmWasm/cw-plus/releases/download/v0.8.0/cw20_base.wasm\nRES=$(wasmd tx wasm store cw20_base.wasm --from wallet $TXFLAG -y)\n\n# get code id\nCODE_ID=$(echo $RES | jq -r '.logs[0].events[1].attributes[0].value')\n\n# print code id\necho $CODE_ID\n\n# no contracts yet, this should return an empty list\nwasmd query wasm list-contract-by-code $CODE_ID $NODE --output json\n\n")),(0,s.kt)("p",null,"Now the code stored on the network. ",(0,s.kt)("inlineCode",{parentName:"p"},"CODE_ID")," is the identifier of the code."),(0,s.kt)("h2",{id:"instantiate"},"Instantiate"),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"Smart contract code != usable smart contract instance")),(0,s.kt)("p",null,"Smart contract code is just a blueprint of a smart contract. We ",(0,s.kt)("em",{parentName:"p"},"instantiate")," a smart contract based on smart\ncontract code."),(0,s.kt)("p",null,"Here is the instantiation message:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "name": "Golden Stars",\n  "symbol": "STAR",\n  "decimals": "2",\n  "initial_balances": [\n    {"address": "wasm1ez03me7uljk7qerswdp935vlaa4dlu48mys3mq", "amount": "10000"},\n    {"address": "wasm1tx7ga0lsnumd5hfsh2py0404sztnshwqaqjwy8", "amount": "10000"},\n    {"address": "wasm1mvjtezrn8dpateu0435trlw5062qy76gf738n0", "amount": "10000"}\n  ],\n  "mint": {\n    "minter": "addr"\n  }\n}\n')),(0,s.kt)("p",null,"This message contains initial state of the contract."),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-shell"},'INIT=$(jq -n --arg wallet $(wasmd keys show -a wallet) \'{"name":"Golden Stars","symbol":"STAR","decimals":2,"initial_balances":[{"address":"wasm1n8aqd9jq9glhj87cn0nkmd5mslz3df8zm86hrh","amount":"10000"},{"address":"wasm13y4tpsgxza44yq76qvj69sakq4jmeyqudwgwpk","amount":"10000"},{"address":$wallet,"amount":"10000"}],"mint":{"minter":$wallet}}\')\n\nwasmd tx wasm instantiate $CODE_ID "$INIT" --from wallet $TXFLAG --label "first cw20"\n')),(0,s.kt)("p",null,"You will see this output indicating that instantiation transaction is success:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "height": "1350700",\n  "txhash": "82D7240A35BDC6DE307AA725FE52590E83B60D4B682ABB0B0F6DCA28A66212D9",\n  "data": "0A3C0A0B696E7374616E7469617465122D0A2B7761736D3170657A74676C397661677768346B3574677765366E367475397338686A7779716D6C6D72686B",\n  "raw_log": "[{\\"events\\":[{\\"type\\":\\"message\\",\\"attributes\\":[{\\"key\\":\\"action\\",\\"value\\":\\"instantiate\\"},{\\"key\\":\\"module\\",\\"value\\":\\"wasm\\"},{\\"key\\":\\"signer\\",\\"value\\":\\"wasm10qhh60sexwtzd6nqr4r34z6t2d7nfrqp684twu\\"},{\\"key\\":\\"code_id\\",\\"value\\":\\"135\\"},{\\"key\\":\\"contract_address\\",\\"value\\":\\"wasm1peztgl9vagwh4k5tgwe6n6tu9s8hjwyqmlmrhk\\"}]},{\\"type\\":\\"wasm\\",\\"attributes\\":[{\\"key\\":\\"contract_address\\",\\"value\\":\\"wasm1peztgl9vagwh4k5tgwe6n6tu9s8hjwyqmlmrhk\\"}]}]}]",\n  "logs": [\n    {\n      "events": [\n        {\n          "type": "message",\n          "attributes": [\n            {\n              "key": "action",\n              "value": "instantiate"\n            },\n            {\n              "key": "module",\n              "value": "wasm"\n            },\n            {\n              "key": "signer",\n              "value": "wasm10qhh60sexwtzd6nqr4r34z6t2d7nfrqp684twu"\n            },\n            {\n              "key": "code_id",\n              "value": "135"\n            },\n            {\n              "key": "contract_address",\n              "value": "wasm1peztgl9vagwh4k5tgwe6n6tu9s8hjwyqmlmrhk"\n            }\n          ]\n        },\n        {\n          "type": "wasm",\n          "attributes": [\n            {\n              "key": "contract_address",\n              "value": "wasm1peztgl9vagwh4k5tgwe6n6tu9s8hjwyqmlmrhk"\n            }\n          ]\n        }\n      ]\n    }\n  ],\n  "gas_wanted": "185650",\n  "gas_used": "155257"\n}\n')),(0,s.kt)("p",null,"Now we purposed the aim of this lesson. You now know how smart contracts interaction looks like.\nOf course there are other ways to achieve this, like CosmJS clients."),(0,s.kt)("p",null,"We will stop here, contract execution is the topic of another course."))}d.isMDXComponent=!0}}]);